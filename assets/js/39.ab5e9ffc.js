(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{477:function(n,s,a){"use strict";a.r(s);var i=a(2),t=Object(i.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"多重背包及其优化问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多重背包及其优化问题"}},[n._v("#")]),n._v(" 多重背包及其优化问题")]),n._v(" "),s("h3",{attrs:{id:"_1-多重背包i"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-多重背包i"}},[n._v("#")]),n._v(" "),s("a",{attrs:{href:"https://www.acwing.com/problem/content/4/",target:"_blank",rel:"noopener noreferrer"}},[n._v("1.多重背包I"),s("OutboundLink")],1)]),n._v(" "),s("ol",[s("li",[s("p",[n._v("题目描述")]),n._v(" "),s("blockquote",[s("p",[n._v("有 "),s("strong",[n._v("N")]),n._v(" 种物品和一个容量是 "),s("strong",[n._v("V")]),n._v(" 的背包。")]),n._v(" "),s("p",[n._v("第 "),s("strong",[n._v("i")]),n._v(" 种物品最多有 "),s("strong",[n._v("si")]),n._v(" 件，每件体积是 "),s("strong",[n._v("vi")]),n._v("，价值是 "),s("strong",[n._v("wi")]),n._v("。")]),n._v(" "),s("p",[n._v("求解将哪些物品装入背包，可使物品体积总和不超过背包容量，且价值总和最大。\n输出最大价值。")])])]),n._v(" "),s("li",[s("p",[n._v("思路")]),n._v(" "),s("p",[n._v("和完全背包问题相同的思路，但和完全背包问题的不同之处在于，多重背包的 第"),s("code",[n._v("i")]),n._v("件物品的可选择数量"),s("strong",[n._v("有限")])]),n._v(" "),s("ul",[s("li",[n._v("状态转移方程")])]),n._v(" "),s("div",{staticClass:"language-C++ line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/*\nf[i][j] 表示考虑前 i 个物品，在体积为j的限制下的方案集合，f[i][j] = 方案中价值的最大值\n*/\nf[i][j] = max(f[i - 1][j], f[i - 1][j - v[i]] + w[i], ...... , f[i - 1][j - x * v[i]] + x * w[i])\n// x = min(j / v[i], cnt[i]) , 既要考虑本身数量，也要考虑背包容积\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("ul",[s("li",[s("p",[n._v("状态初始化")]),n._v(" "),s("p",[n._v("初始状态均为0，声明状态数组时已经默认初始化为0，无需再次初始化。")])])])]),n._v(" "),s("li",[s("p",[n._v("代码")]),n._v(" "),s("div",{staticClass:"language-c++ line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("#include <iostream>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\nconst int N = 110;\nconst int V = 110;\nint s[N];\nint v[N];\nint w[N];\nint f[V];\nint main()\n{\n    int n,vb;\n    cin >> n >> vb;\n    for(int i = 1; i <= n; i ++)\n    {\n        cin >> v[i] >> w[i] >> s[i];\n    }\n    \n    for (int i = 1; i <= n; i ++ )\n    {\n        for(int j = vb; j >= 0; j --)\n        {\n            int x = min(j / v[i], s[i]);\n            while(x)\n            {\n                f[j] = max(f[j], f[j - x * v[i]] + x * w[i]);\n                x --;\n            }\n        }\n    }\n    cout << f[vb] << endl;\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br")])])])]),n._v(" "),s("h3",{attrs:{id:"_2-多重背包-ii"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-多重背包-ii"}},[n._v("#")]),n._v(" "),s("a",{attrs:{href:"https://www.acwing.com/problem/content/5/",target:"_blank",rel:"noopener noreferrer"}},[n._v("2.多重背包 II"),s("OutboundLink")],1)]),n._v(" "),s("ol",[s("li",[s("p",[n._v("题目描述")]),n._v(" "),s("blockquote",[s("p",[n._v("题目描述同上，这里主要列一下数据范围")]),n._v(" "),s("p",[n._v("0<N≤1000\n0<V≤2000\n0<vi,wi,si≤2000")]),n._v(" "),s("p",[n._v("在极端情况下，数据计算量可达到 1000 * 2000 * 2000 即 2 * 10 ^9，在 "),s("strong",[n._v("1s")]),n._v(" 内会超时，故我们需要进行算法优化")])])]),n._v(" "),s("li",[s("p",[n._v("思路")]),n._v(" "),s("p",[n._v("已分析按照 "),s("a",{attrs:{href:"#1.%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85I"}},[n._v("题目1")]),n._v(" 思路做遇到极端数据会超时，所以我们需要对算法进行进一步的优化。")]),n._v(" "),s("p",[n._v("经分析易知，我们需要找到价值最大的方案，其本质是枚举所有的方案，然后从中选出最优方案，即"),s("strong",[n._v("动态规划")]),n._v(" 问题完全可以使用暴力方法求解。但是不同的状态划分方式有着不同的时间复杂度，我们希望算法的复杂度尽可能小。")]),n._v(" "),s("p",[n._v("考虑这样一种方式：")]),n._v(" "),s("p",[n._v("​\t对于第 "),s("code",[n._v("i")]),n._v(" 个物品，其数量为 "),s("code",[n._v("cnt[i]")]),n._v(" ，如果我们按照 "),s("code",[n._v("1 2 4 .... 2 ^ n")]),n._v("的形式将其划分不同的物品集合，然后将这一个物品集合看作一个物品，那么这样物品的个数可以得到进一步的压缩，但不会对最终的结果造成影响。假设某种选取方案选取了 "),s("code",[n._v("x")]),n._v("个物品"),s("code",[n._v("i")]),n._v(" 那么，"),s("code",[n._v("x")]),n._v(" 一定可以被 上述方案所划分的某几个集合所表示。可以用一句话总结，即 2^n次方可以表示任何一个数。")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[n._v(" 这样来看，问题就转化为了对新划分物品的 0 1背包问题，即对每个物品有选 不选这两种选择。\n")])])]),s("p",[n._v("​     对于"),s("code",[n._v("cnt[i]")]),n._v(" 可划分为 "),s("code",[n._v("log2 cnt[i] + 1")]),n._v(" 个集合，"),s("code",[n._v("log2 2000 = 11")]),n._v(" ，即极端情况下需要划分为11 个集合，此时计算量大约为：")]),n._v(" "),s("p",[n._v("​\t1000 * 11 * 2000，完全不会超时。")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("状态转移方程")]),n._v(" "),s("p",[n._v("即为 0 1 背包问题的状态转移方程，问题的重点是转换为 0 1背包问题")])]),n._v(" "),s("li",[s("p",[n._v("状态初始化")]),n._v(" "),s("p",[n._v("参照 0 1背包问题的状态转移方程")])])])]),n._v(" "),s("li",[s("p",[n._v("代码")]),n._v(" "),s("div",{staticClass:"language-c++ line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("#include <iostream>\n#include <cstring>\n#include <algorithm>\nusing namespace std;\nconst int N = 12010;\nconst int V = 2010;\nint v[N];\nint w[N];\nint f[V];\nint main()\n{\n    int n,vb;\n    cin >> n >> vb;\n    int a,b,c; // 读入体积、价值、数量\n    int idx = 0;\n    for (int i = 1; i <= n; i ++ )\n    {\n        cin >> a >> b >> c;\n        int num = 1;\n        while(c - num >= 0)\n        {\n            c -= num;\n            idx ++;\n            v[idx] = num * a;\n            w[idx] = num * b;\n            num *= 2;\n        }\n        if(c)\n        {\n            idx ++;\n            v[idx] = c * a;\n            w[idx] = c * b;\n        }\n    }\n    \n    // 经上述过程处理之后，题目转换为 共有idx个物品，每个只能选一次的 0 1 背包问题\n    for(int i = 1; i <= idx; i ++)\n    {\n        for(int j = vb; j >= v[i]; j --)\n        {\n            f[j] = max(f[j],f[j - v[i]] + w[i]);        \n        }\n    }\n    \n    cout << f[vb] << endl;\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br")])])])]),n._v(" "),s("h3",{attrs:{id:"_3-多重背包iii"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-多重背包iii"}},[n._v("#")]),n._v(" "),s("a",{attrs:{href:"https://www.acwing.com/problem/content/6/",target:"_blank",rel:"noopener noreferrer"}},[n._v("3.多重背包III"),s("OutboundLink")],1)]),n._v(" "),s("ol",[s("li",[s("p",[n._v("题目描述")]),n._v(" "),s("blockquote",[s("p",[n._v("0<N≤1000\n0<V≤20000\n0<vi,wi,si≤20000")])]),n._v(" "),s("p",[n._v("数据量进一步加大，需要进行进一步的优化")])]),n._v(" "),s("li",[s("p",[n._v("思路")]),n._v(" "),s("p",[n._v("挖个坑，过几天填上......")])]),n._v(" "),s("li",[s("p",[n._v("代码")])])]),n._v(" "),s("h3",{attrs:{id:""}},[s("a",{staticClass:"header-anchor",attrs:{href:"#"}},[n._v("#")])]),n._v(" "),s("h3",{attrs:{id:"-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[n._v("#")])])])}),[],!1,null,null,null);s.default=t.exports}}]);